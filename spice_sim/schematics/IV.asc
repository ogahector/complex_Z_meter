Version 4
SHEET 1 1780 956
WIRE 224 208 80 208
WIRE 80 272 80 208
WIRE 112 272 80 272
WIRE 224 288 224 208
WIRE 224 288 176 288
WIRE 272 288 224 288
WIRE 336 288 272 288
WIRE 480 288 416 288
WIRE 608 288 480 288
WIRE 816 288 720 288
WIRE 112 304 0 304
WIRE 816 368 816 288
WIRE 224 416 80 416
WIRE 224 480 224 416
WIRE 224 480 192 480
WIRE 80 496 80 416
WIRE 80 496 0 496
WIRE 128 496 80 496
WIRE 272 512 272 288
WIRE 272 512 192 512
WIRE 224 576 80 576
WIRE -496 608 -496 576
WIRE 224 640 224 576
WIRE 224 640 192 640
WIRE 80 656 80 576
WIRE 80 656 0 656
WIRE 128 656 80 656
WIRE 480 672 480 288
WIRE 480 672 192 672
WIRE -496 720 -496 688
WIRE -496 832 -496 800
WIRE -496 928 -496 912
FLAG -224 688 0
FLAG -496 928 0
FLAG -224 608 Vin
FLAG 144 320 0
FLAG 144 256 Vcc
FLAG 0 304 Vin
FLAG -224 496 0
FLAG -224 416 Vdac_old
FLAG 816 368 0
FLAG 160 528 0
FLAG 160 464 Vcc
FLAG 160 688 0
FLAG 160 624 Vcc
FLAG 0 496 Vadc1
FLAG 0 656 Vadc2
FLAG -672 672 0
FLAG -672 592 Vcc
SYMBOL voltage -496 816 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value PWL(0 0 1m 5)
SYMATTR SpiceLine Rser=0.1
SYMBOL voltage -224 592 R0
WINDOW 123 24 124 Left 2
WINDOW 39 24 152 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName Vin
SYMATTR Value ""
SYMBOL OpAmps\\UniversalOpAmp2 144 288 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=Abuf GBW=GBWbuf Slew=SLEWbuf
SYMATTR SpiceLine Ilimit=40m Rail=0 Vos=0
SYMBOL bv -224 400 M0
SYMATTR InstName DAC
SYMATTR Value V={floor(V(VIN)/vrange*nlevels)/nlevels*vrange}
SYMBOL res 432 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {Rref}
SYMBOL OpAmps\\UniversalOpAmp2 160 496 M0
SYMATTR InstName U2
SYMATTR Value2 Avol=Abuf GBW=GBWbuf Slew=SLEWbuf
SYMATTR SpiceLine Ilimit=40m Rail=0 Vos=0
SYMBOL OpAmps\\UniversalOpAmp2 160 656 M0
SYMATTR InstName U3
SYMATTR Value2 Avol=Abuf GBW=GBWbuf Slew=SLEWbuf
SYMATTR SpiceLine Ilimit=40m Rail=0 Vos=0
SYMBOL ind -512 592 R0
SYMATTR InstName L1
SYMATTR Value 1µ
SYMBOL voltage -496 704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 10m 100k)
SYMBOL voltage -672 576 R0
WINDOW 123 24 124 Left 2
WINDOW 39 24 152 Left 2
SYMATTR Value2 5
SYMATTR InstName VCC
SYMATTR Value ""
SYMBOL capacitor 656 288 R0
SYMATTR InstName X1
TEXT 1000 528 Left 2 !.param Abuf=1Meg
TEXT 1000 552 Left 2 !.param GBWbuf 70Meg
TEXT 1000 576 Left 2 !.param SLEWbuf 200Meg
TEXT 1000 320 Left 2 !.param vrange 1
TEXT 1000 344 Left 2 !.param nlevels=1028
TEXT 1000 376 Left 2 ;DAC VQUANT 0 V={floor(V(VIN)/vrange*nlevels)/nlevels*vrange}
TEXT 1000 184 Left 2 ;.tran 10m
TEXT 1000 216 Left 2 !.ac dec 100 10 1Meg
TEXT 480 208 Left 2 !.param R=10 L=1n Ca=1u Cb=0
TEXT 1000 248 Left 2 ;.noise V(vadc2) V1 dec 100 10 1Meg
TEXT 1000 136 Left 4 ;Analysis
TEXT 1000 488 Left 4 ;Component parameters
TEXT 136 112 Left 4 ;Circuit
TEXT -488 240 Left 4 ;Voltages/ADC/DAC
TEXT 376 -112 Left 2 !.meas AC ideal_output PARAM V(n002)/I(X1)
TEXT 1000 624 Left 2 !.param Rref=1k
TEXT 1000 656 Left 2 !.param Cref 1u
TEXT 376 -80 Left 2 !.meas AC real_read_output PARAM V(vadc2)/I(X1)
TEXT 480 160 Left 4 ;DUT parameters
