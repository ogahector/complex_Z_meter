Version 4
SHEET 1 1824 680
WIRE -192 -368 -256 -368
WIRE -64 -368 -112 -368
WIRE 0 -368 -64 -368
WIRE -64 -336 -64 -368
WIRE -64 -224 -64 -272
WIRE 464 -224 288 -224
WIRE 288 -176 288 -224
WIRE 288 -64 288 -96
FLAG 464 -224 Vadc
IOPIN 464 -224 Out
FLAG 288 -64 0
FLAG 0 -368 Vb
FLAG -64 -224 0
FLAG -256 -368 Vin
IOPIN -256 -368 In
SYMBOL bv 288 -192 M0
SYMATTR InstName B1
SYMATTR Value V={(floor((V(Vb)/vref)*nlevels)/nlevels)*vrange_out}
SYMBOL res -96 -384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_inADC
SYMATTR Value 50k
SYMBOL cap -80 -336 R0
SYMATTR InstName C_ADC
SYMATTR Value 7p
TEXT -392 -24 Left 2 !.param nlevels=10
TEXT -392 40 Left 2 !.param vrange_out 4.096
TEXT -376 -136 Left 2 ;Input range according to datasheet is 0V to Vref
TEXT -72 40 Left 2 ;Output range is arbitrary (digital), but here it's set to 0V to 4.096V\n(i.e. 10mV per digital value)
TEXT -392 8 Left 2 !.param vref = Vdda
